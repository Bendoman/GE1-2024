[gd_scene load_steps=20 format=3 uid="uid://blvpfujhl0ngx"]

[ext_resource type="Material" uid="uid://b7dc1c7ql1n04" path="res://materials/ground.tres" id="1_0n46i"]
[ext_resource type="Material" uid="uid://cl6tu4rc1rp71" path="res://materials/tank.tres" id="2_qox8n"]
[ext_resource type="Script" path="res://scripts/tank_controller.gd" id="3_jwirr"]
[ext_resource type="Material" uid="uid://b808mmr8ky522" path="res://materials/turret.tres" id="4_dhjyg"]
[ext_resource type="Script" path="res://scripts/turret_controller.gd" id="5_v4mbb"]
[ext_resource type="Script" path="res://scripts/wall.gd" id="6_1dmtj"]
[ext_resource type="Script" path="res://scenes/missile_launcher.gd" id="6_bt67x"]
[ext_resource type="Script" path="res://scripts/camera_3d.gd" id="6_gf6gk"]
[ext_resource type="PackedScene" uid="uid://dv7roxvuh84bm" path="res://scenes/brick.tscn" id="7_3dm0w"]
[ext_resource type="PackedScene" uid="uid://bfwyhllk1eocp" path="res://scenes/missile.tscn" id="9_7csjp"]

[sub_resource type="BoxMesh" id="BoxMesh_my7rm"]
size = Vector3(2, 1, 2)

[sub_resource type="PrismMesh" id="PrismMesh_dsrlm"]
size = Vector3(1, 0.5, 2)

[sub_resource type="CylinderMesh" id="CylinderMesh_gai7j"]
height = 0.5

[sub_resource type="CylinderMesh" id="CylinderMesh_hd087"]
top_radius = 0.1
bottom_radius = 0.1
height = 1.25

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_bf0sk"]
points = PackedVector3Array(0.954305, 0.5, 0.954305, -0.985089, -0.5, -0.985089, -0.985089, -0.5, 0.985089, 0.985089, -0.5, -0.985089, -0.954305, 0.5, -0.954305, 0.985089, -0.5, 0.985089, -0.954305, 0.5, 0.954305, 0.954305, 0.5, -0.954305)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_jlsmi"]
points = PackedVector3Array(-0.0395427, 0.273809, -1.01587, 0.531746, -0.234124, 1.01587, 0.499008, -0.249008, 0.952381, -0.515873, -0.202322, 1.01587, -0.485061, -0.25, -0.956116, 0.531746, -0.234124, -1.01587, 0.0237287, 0.273809, 1.01587, -0.515873, -0.202322, -1.01587, -0.485061, -0.25, 0.956116, 0.0237287, 0.273809, -1.01587, -0.0395427, 0.273809, 1.01587, 0.499008, -0.249008, -0.952381, 0.373003, -0.0753254, -1.01587, 0.373003, -0.0753254, 1.01587)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_0ymwt"]
points = PackedVector3Array(-0.0395427, 0.273809, -1.01587, 0.531746, -0.234124, 1.01587, 0.499008, -0.249008, 0.952381, -0.515873, -0.202322, 1.01587, -0.485061, -0.25, -0.956116, 0.531746, -0.234124, -1.01587, 0.0237287, 0.273809, 1.01587, -0.515873, -0.202322, -1.01587, -0.485061, -0.25, 0.956116, 0.0237287, 0.273809, -1.01587, -0.0395427, 0.273809, 1.01587, 0.499008, -0.249008, -0.952381, 0.373003, -0.0753254, -1.01587, 0.373003, -0.0753254, 1.01587)

[sub_resource type="PlaneMesh" id="PlaneMesh_3n0lq"]
size = Vector2(100, 100)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_fypoc"]

[node name="TankGame" type="Node3D"]

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.247669, 7.21514)
script = ExtResource("3_jwirr")

[node name="Tank" type="MeshInstance3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
material_override = ExtResource("2_qox8n")
mesh = SubResource("BoxMesh_my7rm")
skeleton = NodePath("../..")

[node name="Back" type="MeshInstance3D" parent="Player/Tank"]
transform = Transform3D(1.91069e-15, -4.37114e-08, -1, -1, -4.37114e-08, 0, -4.37114e-08, 1, -4.37114e-08, 0, 0, 1.25)
material_override = ExtResource("2_qox8n")
mesh = SubResource("PrismMesh_dsrlm")

[node name="Front" type="MeshInstance3D" parent="Player/Tank"]
transform = Transform3D(1.91069e-15, -4.37114e-08, 1, -1, -4.37114e-08, 0, 4.37114e-08, -1, -4.37114e-08, 0, 0, -1.25)
material_override = ExtResource("2_qox8n")
mesh = SubResource("PrismMesh_dsrlm")
skeleton = NodePath("../../..")

[node name="Turret" type="MeshInstance3D" parent="Player/Tank"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
material_override = ExtResource("4_dhjyg")
mesh = SubResource("CylinderMesh_gai7j")
script = ExtResource("5_v4mbb")
turretRotation = 120

[node name="Gun" type="MeshInstance3D" parent="Player/Tank/Turret"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0.1, -1)
material_override = ExtResource("4_dhjyg")
mesh = SubResource("CylinderMesh_hd087")

[node name="MissileLauncher" type="Node3D" parent="Player/Tank/Turret/Gun"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.4995, -1.19209e-07)
script = ExtResource("6_bt67x")
missile_scene = ExtResource("9_7csjp")

[node name="BodyCollisionShape" type="CollisionShape3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("ConvexPolygonShape3D_bf0sk")

[node name="BackCollisionShape" type="CollisionShape3D" parent="Player"]
transform = Transform3D(1.91069e-15, -4.37114e-08, -1, -1, -4.37114e-08, 0, -4.37114e-08, 1, -4.37114e-08, 0, 0.5, 1.25)
shape = SubResource("ConvexPolygonShape3D_jlsmi")

[node name="FrontCollisionShape" type="CollisionShape3D" parent="Player"]
transform = Transform3D(1.91069e-15, -4.37114e-08, 1, -1, -4.37114e-08, 0, 4.37114e-08, -1, -4.37114e-08, 0, 0.5, -1.25)
shape = SubResource("ConvexPolygonShape3D_0ymwt")

[node name="CameraTarget" type="Marker3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.52838, 7.23588)

[node name="Marker3D" type="Marker3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2421, -1.92086)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.802609, 0.21924, 0.554754, -0.351299, -0.57789, 0.736636, 0.482087, -0.786115, -0.386801, 0, 0, 0)

[node name="Wall" type="Node3D" parent="."]
script = ExtResource("6_1dmtj")
brick_scene = ExtResource("7_3dm0w")

[node name="Ground body" type="StaticBody3D" parent="."]

[node name="Ground" type="MeshInstance3D" parent="Ground body"]
material_override = ExtResource("1_0n46i")
mesh = SubResource("PlaneMesh_3n0lq")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground body"]
shape = SubResource("WorldBoundaryShape3D_fypoc")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("target", "player")]
transform = Transform3D(1, 0, 0, 0, 0.866636, 0.498942, 0, -0.498942, 0.866636, 0, 3.70158, 5.62033)
script = ExtResource("6_gf6gk")
target = NodePath("../Player/CameraTarget")
player = NodePath("../Player")
